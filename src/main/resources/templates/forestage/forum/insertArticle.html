<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<title>è«–å£‡æ–°å¢æ–‡ç« </title>
	<!-- Favicon-->
	<link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
	<!-- Bootstrap icons-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css2?family=Ysabeau+SC&display=swap" rel="stylesheet">
	<!-- Core theme CSS (includes Bootstrap)-->
	<link th:href="@{/forestage/forum/mainPage/css/styles.css}" rel="stylesheet" />
	<style>
		.ck-editor__editable {
			min-height: 400px;
		}

		#drawArea div {
			display: flex;
			justify-content: space-around;
			align-items: center;
		}
	</style>

</head>

<body class="d-flex flex-column h-100">
	<main class="flex-shrink-0">
		<div th:replace="~{forestage/shared/foreTopNav}"></div>
		<div class="container mt-5">
			<div class="row justify-content-center">
				<div class="col-lg-8">
					<h2 class="text-center">æ–°å¢æ–‡ç« </h2>
					<form th:action="@{/forum/article/insert}" method="POST" enctype="multipart/form-data">
						<div class="mb-3">
							<label for="articleTitle" class="form-label">æ–‡ç« æ¨™é¡Œ</label>
							<input type="text" class="form-control" id="articleTitle" name="articleTitle"
								placeholder="è¼¸å…¥æ–‡ç« æ¨™é¡Œ">
						</div>
						<div class="mb-3">
							<label for="articleContent" class="form-label">æ–‡ç« å…§å®¹</label>
							<textarea class="form-control" id="articleContent" name="articleContent"></textarea>
						</div>
						<div class="mb-3">
							<label for="hashtag" class="form-label">Hashtagã€€æé†’ï¼šä»¥åŠå½¢ç©ºæ ¼ç‚ºåˆ†éš”ï¼Œä¾‹å¦‚"æ”å½± åˆ†äº« å ´åœ°"å¦‚æ­¤è¼¸å…¥å³å¯</label>
							<input type="text" class="form-control" id="hashtag" name="hashtag"
								placeholder="è¼¸å…¥æ–‡ç« çš„Hashtag">
						</div>
						<div class="mb-3">
							<label for="articlePic" class="form-label">ä¸Šå‚³åœ–ç‰‡</label>
							<input class="form-control" type="file" id="articlePic" name="articlePic"
								onchange="previewFile()" multiple>
						</div>
						<div class="mb-3">
							<div id="previewImage"></div>
						</div>
						<div class="row justify-content-center">
							<button type="submit" class="btn btn-primary btn-sm m-2">æäº¤</button>
							<button id="autoFillButton" class="btn btn-primary btn-sm m-2">ä¸€éµè¼¸å…¥</button>
						</div>
					</form>
				</div>
				<div class="col-lg-4">
					<div class="card mb-4">
						<div class="card-header">
							<h2 class="text-center">æˆ‘çš„å°ç•«å¸ƒ</h2>
						</div>
						<div class="card-body" style="height: 500px;">
							<select id="colorSelector" class="form-select mb-2" style="width: 200px;">
								<option value="black">é»‘è‰²</option>
								<option value="blue">è—è‰²</option>
								<option value="red">ç´…è‰²</option>
								<option value="green">ç¶ è‰²</option>
								<option value="yellow">é»ƒè‰²</option>
								<option value="orange">æ©˜è‰²</option>
								<option value="purple">ç´«è‰²</option>
								<option value="pink">ç²‰ç´…è‰²</option>
								<option value="brown">æ£•è‰²</option>
								<option value="gray">ç°è‰²</option>
							</select>
							<div id="drawArea"
								style="height: 350px; width: 350px; border: 1px solid #FFB5A7; margin: auto;">
								<canvas id="game-canvas" width="350" height="350"></canvas>
								<div style="display: flex; justify-content: space-around; align-items: center;">
									<img id="insertCanvasContentButton" class="btn-sm"
										th:src="@{/forestage/forum/insertArticle/assets/insert.png}"
										style="cursor: pointer;">
									<img id="downloadButton" class="mx-auto"
										th:src="@{/forestage/forum/insertArticle/assets/download.png}"
										style="cursor: pointer;">
									<img id="clearCanvas" class="mt-10 mx-auto"
										th:src="@{/forestage/forum/insertArticle/assets/clean.png}"
										style="cursor: pointer;">


								</div>
							</div>

						</div>
					</div>
				</div>




				<script src="https://cdn.ckeditor.com/4.14.0/standard/ckeditor.js"></script>
				<script>
					// åˆå§‹åŒ– CKEditor 4

					var articleContentEditor = CKEDITOR.replace('articleContent');
					articleContentEditor.setData('<p>Hello WorldğŸ˜„</p>');


					document.querySelector("#insertCanvasContentButton").addEventListener("click", function () {
						console.log('insertCanvasContentButton è¢«é»æ“Šäº†');  // åœ¨ click äº‹ä»¶è§¸ç™¼æ™‚è¼¸å‡ºæ—¥èªŒ

						// ç²å–ç•«å¸ƒå…§å®¹
						var canvas = document.querySelector("#game-canvas");
						var image2 = canvas.toDataURL('image/png');

						console.log('åœ–ç‰‡å·²ç”Ÿæˆï¼ŒURL ç‚ºï¼š', image2);  // åœ¨åœ–ç‰‡ç”Ÿæˆå¾Œè¼¸å‡ºæ—¥èªŒ

						// æ’å…¥ç•«å¸ƒå…§å®¹åˆ°æ–‡ç« å…§å®¹ä¸­
						var html = '<img src="' + image2 + '" style="max-width:200px; max-height:200px;" alt="Canvas Image"/>';
						articleContentEditor.insertHtml(html);
					});
				</script>



				<!-- Include CKEditor JS
			<script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script> -->

				<!-- Initialize CKEditor
			<script>
				CKEDITOR.replace('articleContent');
			</script> -->

				<!-- Preview uploaded image -->
				<script>
					function previewFile() {
						var files = document.querySelector('#articlePic').files;
						var preview = document.querySelector('#previewImage');
						preview.innerHTML = ""; // æ¸…ç©ºé è¦½

						Array.from(files).forEach(file => {
							var reader = new FileReader();

							reader.onloadend = function () {
								var img = document.createElement('img'); // å‰µå»ºæ–°çš„ img å…ƒç´ 
								img.src = reader.result; // å°‡è®€å–åˆ°çš„çµæœè³¦å€¼çµ¦ img
								img.style.width = '300px'; // è¨­å®šå¯¬åº¦
								preview.appendChild(img); // æ·»åŠ åˆ°é è¦½å€åŸŸ
							}

							if (file) {
								reader.readAsDataURL(file);
							}
						});
					}
				</script>

				<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

				<script>
					document.querySelector('form').addEventListener('submit', function (e) {
						var hashTagInput = document.querySelector('input[name="hashtag"]');
						var hashTags = hashTagInput.value.split(' ');

						if (hashTags.length > 5) {
							e.preventDefault();
							swal("è«‹æ³¨æ„", "Hashtag æ¨™ç±¤ä¸Šé™ç‚º 5 å€‹ï¼Œæ‚¨å·²è¶…é", "error");
						}
					});
				</script>

				<script>
					document.getElementById('autoFillButton').addEventListener('click', function () {
						// æ¨™é¡Œ
						document.getElementById('articleTitle').value = "ç™¼ç¾å®Œç¾å ´åœ°ï¼Œé»äº®æ”å½±å‰µä½œçš„èˆå°ï¼å ´åœ°åˆ†äº«";

						// å…§å®¹
						var content = `<p>åœ¨æ”å½±å‰µä½œä¸­ï¼Œå ´åœ°çš„é¸æ“‡æ˜¯è‡³é—œé‡è¦çš„ã€‚<strong>ä¸€å€‹ç¨ç‰¹è€Œé©åˆä¸»é¡Œçš„å ´åœ°èƒ½å¤ ç‚ºä½œå“å¢æ·»è±å¯Œçš„æ•…äº‹æ€§å’Œè¦–è¦ºæ•ˆæœ</strong>ã€‚ç¾åœ¨ï¼Œæˆ‘è¦å’Œå¤§å®¶åˆ†äº«ä¸€å€‹ä»¤äººé©šè‰·çš„å ´åœ°ï¼Œé€™å€‹å ´åœ°å°‡æˆç‚ºæ”å½±å¸«å€‘æ‰“é€ å‡ºç„¡é™å‰µæ„çš„èˆå°ã€‚</p><p>é€™å€‹å ´åœ°ä½æ–¼åŸå¸‚çš„å¿ƒè‡Ÿåœ°å¸¶ï¼Œ<span class="marker">å……æ»¿äº†ç¨ç‰¹çš„å»ºç¯‰é¢¨æ ¼å’Œæ­·å²éŸ»å‘³</span>ã€‚å¾å¤è€çš„å··å¼„åˆ°ç¾ä»£æ‘©å¤©å¤§æ¨“ï¼Œé€™è£¡æ“æœ‰å„ç¨®é¢¨æ ¼è¿¥ç•°çš„å ´æ™¯ï¼Œçµ¦æ”å½±å¸«å€‘<em>æä¾›äº†è±å¯Œå¤šæ¨£çš„æ‹æ”é¸æ“‡</em>ã€‚ç„¡è«–ä½ æ˜¯å–œæ­¡ç´”æ¨¸è‡ªç„¶çš„é¢¨æ™¯æ”å½±ï¼Œé‚„æ˜¯åæ„›æ™‚å°šåŸå¸‚é¢¨æ ¼çš„äººåƒæ”å½±ï¼Œé€™å€‹å ´åœ°<strong>éƒ½èƒ½å¤ æ»¿è¶³ä½ çš„éœ€æ±‚</strong>ã€‚</p><p>é™¤äº†å¤šæ¨£çš„å ´æ™¯ï¼Œé€™å€‹å ´åœ°é‚„æ“æœ‰å„ªè¶Šçš„å…‰ç·šæ¢ä»¶ã€‚åœ¨ä¸åŒçš„æ™‚é–“æ®µï¼Œé™½å…‰é€éå»ºç¯‰çš„è§’åº¦å’Œçª—æˆ¶ç‘è½ï¼Œç‡Ÿé€ å‡ºè¿·äººçš„å…‰å½±æ•ˆæœã€‚æ”å½±å¸«å€‘å¯ä»¥å–„ç”¨é€™äº›è‡ªç„¶å…‰ä¾†å‰µé€ ç¨ç‰¹è€Œç”Ÿå‹•çš„ä½œå“ã€‚</p><p>æœ€é‡è¦çš„æ˜¯ï¼Œé€™å€‹å ´åœ°å°æ”å½±å¸«å€‘é–‹æ”¾ï¼Œæä¾›äº†è‰¯å¥½çš„æ‹æ”è¨±å¯æ¢ä»¶ã€‚<strong><em>ç„¡è«–ä½ æ˜¯å°ˆæ¥­æ”å½±å¸«é‚„æ˜¯æ¥­é¤˜æ„›å¥½è€…ï¼Œåªéœ€é ç´„æ™‚é–“ï¼Œå°±èƒ½å¤ åœ¨é€™å€‹å ´åœ°å±•é–‹ä½ çš„æ”å½±å‰µä½œ</em></strong>ã€‚è€Œä¸”ï¼Œå ´åœ°çš„ç®¡ç†åœ˜éšŠä¹Ÿéå¸¸å‹å–„å’Œæ”¯æŒï¼Œä»–å€‘é¡˜æ„æä¾›å¿…è¦çš„å”åŠ©ï¼Œç¢ºä¿ä½ èƒ½å¤ é †åˆ©å®Œæˆæ‹æ”è¨ˆåŠƒã€‚</p><p>ç¸½çµä¾†èªªï¼Œé€™å€‹å ´åœ°æ˜¯æ”å½±å‰µä½œçš„å¯¶è—ï¼Œæ“æœ‰<br></p><ul><li>å¤šæ¨£çš„å ´æ™¯<br></li><li>å„ªè¶Šçš„å…‰ç·šæ¢ä»¶<br></li><li>æ”¯æŒæ€§çš„ç®¡ç†åœ˜éšŠ<br></li></ul><p>å¦‚æœä½ æ­£åœ¨å°‹æ‰¾ä¸€å€‹èƒ½å¤ <span class="marker">é»äº®æ”å½±å‰µä½œçš„èˆå°</span>ï¼Œæˆ‘å¼·çƒˆæ¨è–¦ä½ ä¾†é«”é©—é€™å€‹å ´åœ°çš„é­…åŠ›ã€‚</p>`;
						CKEDITOR.instances.articleContent.setData(content);

						// Hashtag
						document.getElementById('hashtag').value = "æ”å½±å ´åœ° åˆ†äº« æ”å½±å‰µä½œ å»ºç¯‰ å…‰å½± æ‹æ”";
					});
				</script>

				<script>
					document.getElementById('downloadButton').addEventListener('click', function () {
						var canvas = document.getElementById('game-canvas');
					})


				</script>
				<!-- Game script -->
				<script th:src="@{/forestage/forum/mainPage/js/game.js}"></script>
				<!-- çµå°¾éƒ¨åˆ† -->
</body>

</html>